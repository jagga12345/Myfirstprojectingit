{"version":3,"sources":["../../src/carousel-customizable/client.ts"],"names":["animateCarousels","carousels","document","querySelectorAll","Array","from","map","carousel","CarouselCustom","pausePlayButton","querySelector","carouselItems","controls","liveRegion","slideNavItemsMobile","slideNavItems","nextButton","previousButton","addEventListener","pauseAutoPlay","bind","passive","unpauseAutoplay","nextItem","previousItem","handlePausePlayButton","setActive","setCarouselHightonResize","setTimeout","handleAutoPlay","intervalDuration","window","setCarouselHight","carouselItemIndex","index","newActiveItem","newActiveItemImage","newActiveItemImageHeight","getBoundingClientRect","height","calculatedCarouselHeight","innerWidth","style","top","removeProperty","newActiveSlideNavItem","newActiveSlideNavItemMobile","setAttribute","classList","add","textContent","length","newInactiveItem","newInactiveSlideNavItem","newInactiveSlideNavItemMobile","remove","autoPlay","paused","startAutoplayTimeout","cancelAutoplayTimeout","autoPlayTimeout","clearTimeout","pauseIcon","firstElementChild","playIcon","lastElementChild","display","setInactive"],"mappings":"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","sourcesContent":["const animateCarousels = () => {\n  const carousels = document.querySelectorAll('.carousel') as NodeListOf<HTMLElement>;\n  Array.from(carousels).map(carousel => new CarouselCustom(carousel));\n};\n\nclass CarouselCustom {\n  private readonly carouselItems: HTMLElement[];\n  private readonly slideNavItems: HTMLElement[];\n  private readonly slideNavItemsMobile: HTMLElement[];\n  private readonly nextButton: HTMLButtonElement;\n  private readonly liveRegion: HTMLElement;\n  private readonly controls: HTMLElement;\n  private readonly carousel: HTMLElement;\n  private readonly previousButton: HTMLButtonElement;\n  private readonly pausePlayButton: HTMLButtonElement;\n  private carouselItemIndex = 0;\n  private autoPlay: boolean = true;\n  private paused: boolean = false;\n  private readonly intervalDuration = 7000;\n  private autoPlayTimeout: number | undefined;\n\n  public constructor(carousel: HTMLElement) {\n    this.carousel = carousel;\n    this.pausePlayButton = carousel.querySelector('.carousel__button-pause') as HTMLButtonElement;\n    this.carouselItems = Array.from(carousel.querySelectorAll('.carousel__item'));\n    this.controls = carousel.querySelector('.carousel__controls') as HTMLElement;\n    this.liveRegion = carousel.querySelector('.liveregion') as HTMLElement;\n    this.slideNavItemsMobile = Array.from(carousel.querySelectorAll('.slide-nav-mobile .carousel__slide-nav__circle'));\n    this.slideNavItems = Array.from(this.controls.querySelectorAll('.carousel__slide-nav__circle'));\n    this.nextButton = carousel.querySelector('.carousel__button-arrow-forward') as HTMLButtonElement;\n    this.previousButton = carousel.querySelector('.carousel__button-arrow-back') as HTMLButtonElement;\n    carousel.addEventListener('mouseenter', this.pauseAutoPlay.bind(this), { passive: true });\n    carousel.addEventListener('focusin', this.pauseAutoPlay.bind(this), { passive: true });\n    carousel.addEventListener('focusout', this.unpauseAutoplay.bind(this), { passive: true });\n    carousel.addEventListener('mouseleave', this.unpauseAutoplay.bind(this), { passive: true });\n    this.nextButton.addEventListener('click', this.nextItem.bind(this), { passive: true });\n    this.previousButton.addEventListener('click', this.previousItem.bind(this), { passive: true });\n    this.pausePlayButton.addEventListener('click', this.handlePausePlayButton.bind(this), { passive: true });\n    this.setActive(0);\n    this.setCarouselHightonResize();\n\n    setTimeout(this.handleAutoPlay.bind(this), this.intervalDuration);\n  }\n\n  private setCarouselHightonResize(): void {\n    window.addEventListener('resize', () => this.setCarouselHight(this.carouselItemIndex), { passive: true });\n  }\n\n  private setCarouselHight(index: number): void {\n    const newActiveItem = this.carouselItems[index];\n    const newActiveItemImage = newActiveItem.querySelector('.carousel__item__image-container') as HTMLElement;\n    const newActiveItemImageHeight = newActiveItemImage.getBoundingClientRect().height;\n    const calculatedCarouselHeight = newActiveItem.getBoundingClientRect().height;\n\n    if (window.innerWidth < 1024) {\n      this.carousel.style.height = `${calculatedCarouselHeight}px`;\n      this.controls.style.top = `${newActiveItemImageHeight}px`;\n    } else {\n      this.carousel.style.removeProperty('height');\n      this.controls.style.top = 'auto';\n    }\n  }\n\n  private setActive(index: number): void {\n    const newActiveItem = this.carouselItems[index];\n    const newActiveSlideNavItem = this.slideNavItems[index];\n    const newActiveSlideNavItemMobile = this.slideNavItemsMobile[index];\n\n    this.setCarouselHight(index);\n\n    newActiveItem.setAttribute('aria-hidden', 'false');\n    newActiveItem.classList.add('carousel__item--active');\n    newActiveSlideNavItem.classList.add('carousel__slide-nav__circle--active');\n    newActiveSlideNavItemMobile.classList.add('carousel__slide-nav__circle--active');\n\n    if (this.liveRegion) {\n      this.liveRegion.textContent = `Slide ${index + 1} of ${this.carouselItems.length}`;\n    }\n  }\n\n  private setInactive(index: number): void {\n    const newInactiveItem = this.carouselItems[index];\n    const newInactiveSlideNavItem = this.slideNavItems[index];\n    const newInactiveSlideNavItemMobile = this.slideNavItemsMobile[index];\n\n    newInactiveItem.setAttribute('aria-hidden', 'true');\n    newInactiveItem.classList.remove('carousel__item--active');\n    newInactiveSlideNavItem.classList.remove('carousel__slide-nav__circle--active');\n    newInactiveSlideNavItemMobile.classList.remove('carousel__slide-nav__circle--active');\n  }\n\n  private handleAutoPlay(): void {\n    if (this.autoPlay && !this.paused) {\n      this.nextItem();\n    }\n  }\n\n  private unpauseAutoplay(): void {\n    this.paused = false;\n    this.startAutoplayTimeout();\n  }\n\n  private pauseAutoPlay(): void {\n    this.paused = true;\n  }\n\n  private startAutoplayTimeout(): void {\n    this.cancelAutoplayTimeout();\n    this.autoPlayTimeout = window.setTimeout(this.handleAutoPlay.bind(this), this.intervalDuration);\n  }\n\n  private cancelAutoplayTimeout(): void {\n    this.autoPlayTimeout && clearTimeout(this.autoPlayTimeout);\n  }\n\n  private handlePausePlayButton(): void {\n    const pauseIcon = this.pausePlayButton.firstElementChild as HTMLElement;\n    const playIcon = this.pausePlayButton.lastElementChild as HTMLElement;\n\n    if (!playIcon || !pauseIcon) {\n      return;\n    }\n    if (!this.autoPlay) {\n      this.autoPlay = true;\n      this.unpauseAutoplay();\n\n      playIcon.style.display = 'none';\n      pauseIcon.style.display = 'block';\n      pauseIcon.setAttribute('aria-hidden', 'false');\n      playIcon.setAttribute('aria-hidden', 'true');\n    } else {\n      this.autoPlay = false;\n      this.cancelAutoplayTimeout();\n\n      playIcon.style.display = 'block';\n      pauseIcon.style.display = 'none';\n      pauseIcon.setAttribute('aria-hidden', 'true');\n      playIcon.setAttribute('aria-hidden', 'false');\n    }\n  }\n\n  private nextItem(): void {\n    this.setInactive(this.carouselItemIndex);\n\n    this.startAutoplayTimeout();\n\n    this.carouselItemIndex++;\n    if (this.carouselItemIndex > this.carouselItems.length - 1) {\n      this.carouselItemIndex = 0;\n    }\n\n    this.setActive(this.carouselItemIndex);\n  }\n\n  private previousItem(): void {\n    this.startAutoplayTimeout();\n    this.setInactive(this.carouselItemIndex);\n\n    this.carouselItemIndex--;\n    if (this.carouselItemIndex < 0) {\n      this.carouselItemIndex = this.carouselItems.length - 1;\n    }\n\n    this.setActive(this.carouselItemIndex);\n  }\n}\n\nexport default () => {\n  animateCarousels();\n};\n"],"file":"client.js"}